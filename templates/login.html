{% load static %}
<!doctype html>
<html lang="en">   
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>    
    <title>Login</title>
    <style type="text/css">
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap');

        body,
        button {
            font-family: 'Poppins', sans-serif;
            background-color: #EEEEEE;
        }

        .bg-dark {
            background-color: #193940 !important;
        }

        .footer-text {
            font-size: 10px;
            color: #ffffff !important;
        }
    </style>
<script>
    $(document).ready(function()
    {       
        if(sessionStorage.getItem("45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591") != null)
        {
            if(sessionStorage.getItem("45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591") === "9f02f775abea162963140b0c9945229c8fd57d32563fe586540d00d6c984724ddf069e3ef3d2f147a01ce91c19836ea22e66987e33523c2fb3d90cc7bbcd28c8")
            {
                logout_process();
            }
            if(sessionStorage.getItem("45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591") != "9f02f775abea162963140b0c9945229c8fd57d32563fe586540d00d6c984724ddf069e3ef3d2f147a01ce91c19836ea22e66987e33523c2fb3d90cc7bbcd28c8")
            {
                $("#lbl_status").text(sessionStorage.getItem("45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591"));
                sessionStorage.removeItem("45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591");
            }
            
        }

        $("#password").on('keyup', function (event) 
        {
            if (event.keyCode === 13) {
                if($("#password").val() !== "")
                {
                    token_process() 
                }
                    
            }
           });
            
    });

function logout_process()
{        
    $.ajax({
        url: "/logout",
        data : {"b9297e16791de8e8bff0fb7870682121f94fd89acfd8506be4662e238495141916eed2100b21724a35927e0e7867007c470564c80bf7d9a971d490b817a05e31" : sessionStorage.getItem("b9297e16791de8e8bff0fb7870682121f94fd89acfd8506be4662e238495141916eed2100b21724a35927e0e7867007c470564c80bf7d9a971d490b817a05e31")},        
        success: function (result) 
        {                        
            if(result === "78661b2fac117e9c9764a46403d20579e49974a5aa004922573cf08150c16de8365196319d6662187bde83ae9d6669956a13e2ea22ddb801e15df3887b2252ec")
            {                
                sessionStorage.removeItem("b9297e16791de8e8bff0fb7870682121f94fd89acfd8506be4662e238495141916eed2100b21724a35927e0e7867007c470564c80bf7d9a971d490b817a05e31");
                sessionStorage.removeItem("45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591");                                
            }
        }
    });
}
        function token_process() 
        {            
            var username = $("#username").val();
            var password = $("#password").val();            
            $.ajax({
                url: "/get_token?username="+username+"&password="+password,                
                dataType: "json",
                success: function (result) 
                {    
                    //alert(result["b9297e16791de8e8bff0fb7870682121f94fd89acfd8506be4662e238495141916eed2100b21724a35927e0e7867007c470564c80bf7d9a971d490b817a05e31"])
                    if (result["45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591"] === "51e85deb51c2b909a21ec5b8e83b1cb28da258b1be227620105a345a2bd4c6aea549cd5429670f2df33324667b9f623a420b3a0bdbbd03ad48602211e75478a7")
                    {                        
                        sessionStorage.setItem("b9297e16791de8e8bff0fb7870682121f94fd89acfd8506be4662e238495141916eed2100b21724a35927e0e7867007c470564c80bf7d9a971d490b817a05e31",result["b9297e16791de8e8bff0fb7870682121f94fd89acfd8506be4662e238495141916eed2100b21724a35927e0e7867007c470564c80bf7d9a971d490b817a05e31"]);
                        sessionStorage.setItem("45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591",result["45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591"]);
                        $("#login_form").submit();                        
                    }
                    else
                    {
                        $("#lbl_status").text(result["45270d7fc39f9b812bc348a10c53fe80920ca866eefc4b8e5eefe20590fa319a655ff8e571caf8e757dc83a024b6f3e02063e4780d635636f233c1e6e05f2591"]);
                    }
                }
            });
        } 
    </script>    

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">            
            <a class="navbar-brand me-auto ms-lg-0 ms-3 text-uppercase fw-bold" href="#">Adra Developers</a>
        </div>
    </nav>
    
    <div class="container-fluid">        
        <div class="container vh-100 login_page">
            <div class="row align-items-center vh-100">
                <div class="col-lg-4 mx-auto">
                    <div class="bg-white p-5 rounded shadow-sm">
                        
                        <h6 class="text-info text-center">Car Predictive Analysis</h6>
                        <h3 class="text-center">LOGIN</h3>
                        <form id="login_form" method="POST" action="/ed74cf28e117c5f6dc9d4b8dfd76a7728d86000884abe0bffab1b9c881e0006ca6e057331ec536449b407bb0c5d4d947caff50d94e44772eccb6e6ad155e1a71/"> 
                            {% csrf_token %}
                            <div class="mb-3">
                                <label class="form-label">Username <small class="text-danger">*</small></label>
                                <input type="text"
                                    name="username"
                                    placeholder="Username"
                                    class="form-control"
                                    id="username" value="admin" />                                                                      
                                
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Password <small class="text-danger">*</small></label>
                                <input type="password"
                                    name="password"
                                    placeholder="password"
                                    class="form-control"
                                    id="password"   value="Applied@12345"                                 
                                />
                              
                            </div>                            
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary text-uppercase " onclick="token_process();" type="button" >Submit</button>
                            </div>
                            <div class="d-grid gap-2" style="padding-top: 5px;">
                                <label id="lbl_status" style="color: red;text-align: center;">{{login_status}}</label>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <nav class="navbar fixed-bottom navbar-dark bg-dark py-0">
        <div class="container justify-content-center">
            <span class="navbar-text footer-text" href="#">Copyright 2022 Â© <a>Adra Developers</a></span>
        </div>
    </nav>
</body>

</html>
